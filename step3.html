<html>

<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<title>Creating a Simple Game with HTML5 Canvas and JavaScript&nbsp;&nbsp;&nbsp;&nbsp; 
STEP 3: Physics &amp; Controls</title>
</head>

<body bgcolor="#d0d0d0">
<font face="Times New Roman">
<div align="center">
  <center>
<table width="50%" border="1" bgcolor="#FFFFFF" style="border-collapse: collapse" bordercolor="#111111" cellpadding="0" cellspacing="0">
  <tr>
<td width="16.7%">
	<div align="center"><font face="Times New Roman"><a href="step1.html" title="Step 1: Introduction & Background">STEP 1</a></font></div>
</td>
<td width="16.7%" align="center">
	<div align="center"><font face="Times New Roman">
    <a href="step2.html" title="Step 2: Character & Animation">STEP 2</a></font></td>
<td width="16.7%" align="center">
	<font face="Times New Roman">
    STEP 3</font></td>
<td width="16.7%"><div align="center">
	<a href="step4.html" title="Step 4: Platforms & Collisions">STEP 4</a></div></td>
<td width="16.7%"><div align="center">
		<a title="Step 5: Scrolling &amp; Game States" href="step5.html">STEP 5</a></div></td>
    <td width="16.7%"><div align="center"><a href="custom.html" title="Custom Simple Game">Custom</a></div></td>
  </tr>
</table>
  </center>
</div>
<center>
<table border="0" cellspacing="0" width="100%" id="AutoNumber2" height="1" style="border-collapse: collapse" bordercolor="#111111" cellpadding="0">
  <tr>
    <td width="100%" align="center" height="1"><p>
    <b>
    <font size="2" face="Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp; <br>
    </font>
    <font size="5" face="Times New Roman">Creating a 
      Simple Game with HTML5 Canvas and JavaScript</font><font size="6" face="Times New Roman"><br>
    STEP 3: Physics &amp; Controls</font></b></p>
      </td>
  </tr>
</table>
</center>

<p>All games have some sort of physics that the coding must deal with. Fortunately for us, the physics in 
<i>Stairway to Heaven</i> is very simple and requires just a few lines of code (if 
we want to create games with more complicated physics, we can cheat a little bit and use a physics engine such as <a href="http://box2d-js.sourceforge.net/index2.html">
Box2d</a> [go play with it...it's cool] to 
    create the code for us).<p>We can divide the animation into two basic parts - jumping and falling. When an object begins to jump, it has some initial velocity that is decreased by gravity. The velocity will eventually be reduced to zero and gravity will begin to drag the object down with increasing velocity. This brings us to the falling portion. We are 
going to make some changes to the player object to get our character to move in 
a way that allows us to play the game.<hr><p><b><font size="5">CODING JUMPING 
AND FALLING</font></b><ol>
  <li>Open <b>game.js</b> in your text editor</li>
  <li>Locate the following line of code: </font>
  <font face="Lucida Console" size="2">
  <span style="background-color: #FFFFFF">
  that.Y = 0;</span></font><font face="Times New Roman"> (remember that you can 
  search for it)</font></li>
  <li><font face="Times New Roman">Insert a blank line <b>BELOW</b> the code 
  indicated above</font></li>
  <li><font face="Times New Roman"><b>Copy</b> and <b>paste</b> the following code 
  onto the blank line:<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="60%" id="AutoNumber3" height="69" bgcolor="#FFFFFF">
    <tr>
      <td width="100%" height="67">
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.isJumping = false;</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.isFalling = false;</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//State of the object described by variables - is it rising or falling?</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.jumpSpeed = 0;</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallSpeed = 0;</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Jumping &amp; falling each need to have their own speed values</font></pre>
        </td>
    </tr>
  </table>
  </li>
</ol>
</font>
<font face="Times New Roman">
<p align="left">Read the comments. Just do it.</p>
<p>Now let's introduce methods that will give us greater control over our 
jumping.</p>
<ol start="5">
  <li>Insert a blank line <b>BELOW</b> the code in the above direction (so below 
	the Jumping and falling comment)</li>
  <li><b>Copy</b> and <b>paste</b> the following code onto the blank line:<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="60%" id="AutoNumber4" bgcolor="#FFFFFF">
    <tr>
      <td width="100%" height="47">
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.jump = function() {</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Initiation of the jump</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (!that.isJumping &amp;&amp; !that.isFalling) {</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Applies only if object isn't currently jumping or falling,</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//this prevents 'double jumps', or bouncing from nothing</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallSpeed = 0;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.isJumping = true;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.jumpSpeed = 17;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Initial velocity</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">         }</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">      }</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.checkJump = function() {</font></pre>
      <pre name="code" class="js" style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0">&nbsp;</pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//When 'jumping' action was initiated by jump() method</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">    that.setPosition(that.X, that.Y - that.jumpSpeed);</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Moves object by number of pixels equal to the current </font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font face="Lucida Console" color="#FF0000">//</font><font size="2" face="Lucida Console" color="#FF0000">value of 'jumpSpeed'...</font></pre>
      <pre name="code" class="js" style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0">&nbsp;</pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.jumpSpeed--;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//...and decreases it (simulation of gravity)</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (that.jumpSpeed == 0) {</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Start falling, similar to jump() function</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.isJumping = false;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.isFalling = true;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallSpeed = 1;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">}</font></pre>
      <pre name="code" class="js" style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0">&nbsp;</pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallStop = function(){</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Stop falling, start jumping again</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.isFalling = false;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallSpeed = 0;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.jump();</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
      <pre name="code" class="js" style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0">&nbsp;</pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.checkFall = function(){</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Same situation as in checkJump() above</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (that.Y &lt; height - that.height) {</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Check if the object meets the bottom of the screen,</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//if not just change the position and increase fallSpeed</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//(simulation of gravity acceleration)...</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.setPosition(that.X, that.Y + that.fallSpeed);</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallSpeed++;</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   } else {</font></pre>
      <pre name="code" class="js" style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0">&nbsp;</pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//...if yes - bounce</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.fallStop();</font></pre>
      <pre name="code" class="js" style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0">&nbsp;</pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
      <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
      </td>
    </tr>
  </table>
  </li>
</ol>
<p>That is a lot of code and there is a lot going on, so READ THE COMMENTS. Reading 
them you should be able to see how our jumps begin 
with our character not moving and go through it rising, falling, and interacting 
with our canvas.</p>
<p>Next we need to edit the main loop function so that our character's position 
is redrawn while jumping and falling. Remember that our character is not 
actually moving up and down, but instead is quickly being drawn on our canvas 
every frame of the animation. To pull of this redraw, we will update the
</font>
<span style="background-color: #FFFFFF"><font face="Lucida Console" size="2">GameLoop</font></span><font face="Times New Roman">
code just before the character is drawn by the browser.</p>
<ol start="7">
  <li>Locate the following line of code:
</font>
  <font face="Lucida Console" size="2">
  <span style="background-color: #FFFFFF">
  DrawCircles();</span></font><font face="Times New Roman"> (it is near the 
  bottom)</font></li>
  <li><font face="Times New Roman">Insert a blank line <b>BELOW</b> the code 
  indicated above</font></li>
  <li><font face="Times New Roman"><b>Copy</b> and <b>paste</b> the following 
  code onto the blank line:</font><table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="60%" id="AutoNumber5" bgcolor="#FFFFFF">
    <tr>
      <td width="100%" height="42">
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (player.isJumping) player.checkJump();</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (player.isFalling) player.checkFall();</font></pre></td>
    </tr>
  </table>
  </li>
</ol>
<font face="Times New Roman">
<p>Our last jumping physics action is to initiate the first jump, right after placing our character on the stage.</p>
<ol start="10">
  <li>Locate the following line of code: </font>
  <span style="background-color: #FFFFFF"><font face="Lucida Console" size="2">player.setPosition(~~((width-player.width)/2),  height - player.height);</font></span><font face="Times New Roman"><font size="2">
  </font>
</font>
  </li>
  <li><font face="Times New Roman">Insert a blank line <b>BELOW</b> the code 
  indicated above</font></li>
  <li><font face="Times New Roman"><b>Copy</b> and <b>paste</b> the following 
  code onto the blank line:</font><table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="60%" id="AutoNumber9" bgcolor="#FFFFFF">
      <tr>
        <td width="100%">
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   player.jump();</font></pre></td>
      </tr>
    </table>
  </li>
</ol>
<font face="Times New Roman">
<hr>
<p><b><font size="5">CODING LEFT AND RIGHT MOVEMENT</font></b></p>
<p>Jumping is one thing, but we need the user to be able to move our character left and right to control it. 
Our code causes the jumping to be automatic, so we want the player to be able to move the character only left or right. Once again we can accomplish this by adding additional methods to the player object.</p>
<ol start="13">
  <li>Locate the following line of code: </font>
  <span style="background-color: #FFFFFF"><font face="Lucida Console" size="2">that.setPosition = function(x, y){</font></span></li>
  <li><font face="Times New Roman">Insert a blank line <b>ABOVE</b> the code 
  indicated above</font></li>
  <li><font face="Times New Roman"><b>Copy</b> and <b>paste</b> the following 
  code onto the blank line:<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="60%" id="AutoNumber10" bgcolor="#FFFFFF">
      <tr>
        <td width="100%">
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.moveLeft = function(){</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (that.X &gt; 0) {</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Check whether the object is inside the screen</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.setPosition(that.X - 5, that.Y);</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.moveRight = function(){</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (that.X + that.width &lt; width) {</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//Check whether the object is inside the screen</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   that.setPosition(that.X + 5, that.Y);</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   }</font></pre>
          </td>
      </tr>
    </table>
  </li>
</ol>
<p>Notice from the comments above that this code allows for movement left and 
right by checking the position of our image to make sure that is it visible on 
the screen.</p>
<p>Now we need to tie the movement of the angel character to the movement of the mouse so that the player has to simply move the mouse left and right to get the 
angel character to move.</p>
<ol start="16">
  <li>Locate the following line of code: 
</font>
	<font size="2">
  <span style="background-color: #FFFFFF"><font face="Lucida Console">player.jump();</font></span></font></li>
  <li>
<font face="Times New Roman">
  Insert a blank line <b>BELOW</b> the code indicated above</font></li>
  <li><font face="Times New Roman"><b>Copy</b> and <b>paste</b> the following 
  code onto the blank line:<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="60%" id="AutoNumber11" bgcolor="#FFFFFF">
      <tr>
        <td width="100%">
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   document.onmousemove = function(e)</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">           {</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">   if (player.X + c.offsetLeft &gt; e.pageX) {</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//If mouse moves to the left side of the character...</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">           player.moveLeft();</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">           } else if (player.X + c.offsetLeft &lt; e.pageX) {</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console" color="#FF0000">//If the mouse moves to the right side of the character...</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">           player.moveRight();</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">           }</font></pre>
        <pre name="code" class="js" style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top:0; margin-bottom:0"><font size="2" face="Lucida Console">          }</font></pre></td>
      </tr>
    </table>
  </li>
</ol>
<p>So we can see now that if the mouse moves to either side of the character 
that our image will follow the mouse in that direction.</p>
<p>Let's save and have a look at what we've got.</p>
<ol start="19">
  <li>Save the file to your <b>SimpleGame</b> folder as <b>game.js</b></li>
  <li>Open the <b>index.html</b> file located in your <b>SimpleGame</b> folder - you 
  should see something similar to the following...<br>
<img border="1" src="pics/301.gif" width="296" height="464"><br>
  Note that your character should move left and right when you move the mouse 
  left and right as in the animation above</ol>
<p>In the next Step we will work on getting the bounce platforms into the game.</p>
<div align="center">
  <center>
<table width="50%" border="1" bgcolor="#FFFFFF" style="border-collapse: collapse" cellpadding="0" cellspacing="0" bordercolor="#000000">
  <tr>
    <td width="103"><div align="center">
<font face="Times New Roman">
      <a href="step1.html" title="Step 1: Introduction & Background">STEP 1</a></font></div></td>
    <td width="103" align="center">
<font face="Times New Roman">
    <a href="step2.html" title="Step 2: Character & Animation">STEP 2</a></font></td>
    <td width="103" align="center">
<font face="Times New Roman">
    STEP 3</font></td>
    <td width="103"><div align="center"><a href="step4.html" title="Step 4: Platforms & Collisions">STEP 4</a></div></td>
    <td width="103"><div align="center">
		<a title="Step 5: Scrolling &amp; Game States" href="step5.html">STEP 5</a></div></td>
    <td width="103"><div align="center"><a href="custom.html" title="Custom Simple Game">Custom</a></div></td>
  </tr>
</table>
  </center>
</div>
</font>
</body>

</html>

</html>